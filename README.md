# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ3  
### **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó Back-end —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–Ω—è ¬∑ –í–∞—Ä—ñ–∞–Ω—Ç 2 ‚Äî –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤–∏—Ç—Ä–∞—Ç**

---

## üìå –û–ø–∏—Å —Ä–æ–±–æ—Ç–∏

–£ —Ä–∞–º–∫–∞—Ö —Ä–æ–±–æ—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–∞ Flask, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î:

- –∫–æ—Ä–µ–∫—Ç–Ω—É **–≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö** (Marshmallow);
- **–æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫** –Ω–∞ —Ä—ñ–≤–Ω—ñ API;
- –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **ORM (Flask-SQLAlchemy)** –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –º—ñ–≥—Ä–∞—Ü—ñ–π (Flask-Migrate);
- **–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —É PostgreSQL**;
- —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é **REST-API**, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ —á–µ—Ä–µ–∑ Flask-Smorest (Swagger `/docs`);
- –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ –¥–µ–ø–ª–æ—é –Ω–∞ **Render.com**.

---

## üéØ –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏

–†–æ–∑—Ä–æ–±–∏—Ç–∏ backend-—Å–∏—Å—Ç–µ–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç–∞–º–∏, —É —è–∫—ñ–π –ø—Ä–∏—Å—É—Ç–Ω—ñ:

- –≥–ª–æ–±–∞–ª—å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, –¥–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É;
- –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω—ñ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞;
- –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ –∑–∞–ø–∏—Å—ñ–≤ –≤–∏—Ç—Ä–∞—Ç;
- –≤–∞–ª—ñ–¥–∞—Ü—ñ—è payload'—ñ–≤ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫.

---

## üß© –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∞ ‚Ññ2 ‚Äî *–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤–∏—Ç—Ä–∞—Ç*

### –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –Ω–∞:

#### **1. –ì–ª–æ–±–∞–ª—å–Ω—ñ**
- `is_global = true`  
- –≤–∏–¥–∏–º—ñ –≤—Å—ñ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –º–æ–∂–µ –±—É–¥—å-—è–∫–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.

#### **2. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ**
- –º–∞—é—Ç—å –ø–æ–ª–µ `user_id`  
- –¥–æ—Å—Ç—É–ø–Ω—ñ –ª–∏—à–µ –≤–ª–∞—Å–Ω–∏–∫—É; —ñ–Ω—à—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –º–æ–∂—É—Ç—å:
  - –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —ó—Ö;
  - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–ø–∏—Å—ñ–≤ –≤–∏—Ç—Ä–∞—Ç.

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–ø–∏—Å—ñ–≤:

- –∫–∞—Ç–µ–≥–æ—Ä—ñ—è —ñ—Å–Ω—É—î;
- —è–∫—â–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ ‚Äî –≤–æ–Ω–∞ –Ω–∞–ª–µ–∂–∏—Ç—å —Å–∞–º–µ —Ç–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É, —è–∫–∏–π —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å;
- –≤—Å—ñ –ø–æ–ª—è –ø—Ä–æ—Ö–æ–¥—è—Ç—å Marshmallow-–≤–∞–ª—ñ–¥–∞—Ü—ñ—é.

---

## üõ†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Python 3.11**  
- **Flask**, **Flask-SQLAlchemy**, **Flask-Migrate**  
- **Marshmallow**, **Flask-Smorest**  
- **PostgreSQL**  
- **Gunicorn** (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É)

---

## üöÄ –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É

```bash
# 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python -m venv venv
venv\Scripts\activate      # Windows
# –∞–±–æ
source venv/bin/activate   # Linux/macOS

# 2. –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
set FLASK_APP=app.py
set DATABASE_URL=postgresql://postgres:1234@localhost:5432/lab3_db

# 4. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
flask db init
flask db migrate -m "Initial migration"
flask db upgrade

# 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python app.py
```

## üåê –î–æ—Å—Ç—É–ø –¥–æ API

- **–°–µ—Ä–≤–µ—Ä:** `http://localhost:5000`  
- **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** `http://localhost:5000/docs`

---

## üìö –û—Å–Ω–æ–≤–Ω—ñ REST-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥  | –®–ª—è—Ö        | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                      |
|--------|-------------|-------------------------------------------------|
| **GET**  | `/user`       | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤                    |
| **POST** | `/user`       | –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                      |
| **GET**  | `/category`   | –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–≥–ª–æ–±–∞–ª—å–Ω—ñ + –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ)    |
| **POST** | `/category`   | –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –≤–∏—Ç—Ä–∞—Ç                   |
| **GET**  | `/record`     | –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –≤–∏—Ç—Ä–∞—Ç                     |
| **POST** | `/record`     | –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å –≤–∏—Ç—Ä–∞—Ç                         |

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∞

–î–ª—è –¥–µ–ø–ª–æ—é –Ω–∞ Render.com –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `gunicorn` —É `requirements.txt` —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ `Procfile`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:
```
web: gunicorn app:app
```
---

## ‚úîÔ∏è –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

- –í–∞–ª—ñ–¥–∞—Ç–æ—Ä –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—î –¥–∞–Ω—ñ.  
- –°–∏—Å—Ç–µ–º–∞ –º—ñ–≥—Ä–∞—Ü—ñ–π –ø—Ä–∞—Ü—é—î.  
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ.  
- API –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–µ —á–µ—Ä–µ–∑ `/docs`.  
- –ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

---

## üîê –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4 ‚Äî –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (JWT)

### ‚ûï **–î–æ–¥–∞–Ω–æ –Ω–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É**

–£ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –õ–†3 —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—é JWT-–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –∑–∞—Ö–∏—Å—Ç –¥–æ—Å—Ç—É–ø—É –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é—î —Ä–æ–±–æ—Ç—É –∑ API –±–µ–∑ –¥—ñ–π—Å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.

---

## üß± –ù–æ–≤—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó (–¥–æ–¥–∞–Ω–æ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å–ø–∏—Å–∫—É)

- **Flask-JWT-Extended**  
- **Docker ¬∑ Docker Compose**

---

## üÜï **–î–æ–¥–∞–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏**

### **POST /register ‚Äî –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**
```json
{
  "username": "testuser",
  "password": "secret123"
}
```

- –ø–∞—Ä–æ–ª—å —Ö–µ—à—É—î—Ç—å—Å—è (`pbkdf2_sha256`);
- –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å username;
- –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.

---

### **POST /login ‚Äî –í—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**
```json
{
  "username": "testuser",
  "password": "secret123"
}
```

–£ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ–≤–µ—Ä—Ç–∞—î:
```json
{
  "access_token": "JWT_TOKEN",
  "user_id": 1
}
```

---

## üõ°Ô∏è **JWT-–∑–∞—Ö–∏—Å—Ç API**

–£—Å—ñ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ —Ç–µ–ø–µ—Ä –∑–∞—Ö–∏—â–µ–Ω—ñ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º:

```python
@jwt_required()
```

–ó–∞—Ö–∏—â–µ–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏:

- `/user`
- `/category`
- `/record`

–ë–µ–∑ –≤–∞–ª—ñ–¥–Ω–æ–≥–æ JWT –¥–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ.

---

## ‚ö†Ô∏è **–û–±—Ä–æ–±–∫–∞ JWT-–ø–æ–º–∏–ª–æ–∫**

–î–æ–¥–∞–Ω—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ —Ö–µ–Ω–¥–ª–µ—Ä–∏:

- –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π —Ç–æ–∫–µ–Ω;
- –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω;
- –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ç–æ–∫–µ–Ω.

–£—Å—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—É JSON-–≤—ñ–¥–ø–æ–≤—ñ–¥—å.

---

## üê≥ Docker –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è)

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç–∞

```bash
docker compose up --build -d
```

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É:

- API ‚Üí http://localhost:5001  
- Swagger ‚Üí http://localhost:5001/docs

–ü–æ—Ä—Ç –∑–º—ñ–Ω–µ–Ω–æ —É `docker-compose.yaml`:

```yaml
ports:
  - "5000:5000"
```

---

## üÜï –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
export JWT_SECRET_KEY="your-secret-key"
export DATABASE_URL="postgresql://postgres:1234@localhost:5432/lab3-4_db"
```

---