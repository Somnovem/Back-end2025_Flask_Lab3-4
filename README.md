Лабораторна робота №3

**Тема:** Валідація, обробка помилок, ORM
**Дисципліна:** Технології розроблення серверного програмного забезпечення (Back-end)
**Варіант:** 35 % 3 = 2 => Тема роботи: Користувацькі категорії витрат

## Мета

Реалізувати бекенд-застосунок, який містить:

- валідацію вхідних даних та обробку помилок;
- роботу з ORM (Flask-SQLAlchemy) та міграціями (Flask-Migrate);
- зберігання даних у базі PostgreSQL;
- REST-API з документацією (Flask-Smorest, Swagger `/docs`);
- підготовку до деплою на Render.com.

## Технології

Python 3.11 · Flask · Flask-SQLAlchemy · Flask-Migrate · Marshmallow · Flask-Smorest · PostgreSQL · Gunicorn

## Варіант 2 — Користувацькі категорії витрат

У межах варіанту реалізовано розширену логіку роботи з категоріями витрат:

- **Загальні категорії** (`is_global = true`) — доступні всім користувачам.
- **Користувацькі категорії** (`user_id`) — видимі та доступні лише власнику.
- При створенні записів витрат виконується перевірка:
  - що категорія існує;
  - що користувач має право використовувати цю категорію (не може використовувати чужу персональну категорію);
  - валідація вхідних даних виконується через Marshmallow-схеми.

## Локальний запуск
```bash
python -m venv venv
venv\Scripts\activate  # замість цього source venv/bin/activate на Linux/macOS
pip install -r requirements.txt

set FLASK_APP=app.py
set DATABASE_URL=postgresql://postgres:1234@localhost:5432/lab3_db

flask db init
flask db migrate -m "Initial migration"
flask db upgrade

python app.py
```

## Доступ до API

Бекенд буде доступний за адресою `http://localhost:5000`, документація — на `http://localhost:5000/docs`.

## Основні ендпоінти
| Метод | Шлях      | Опис                        |
|-------|-----------|-----------------------------|
| GET   | `/user`   | Отримати всіх користувачів |
| POST  | `/user`   | Створити користувача       |
| GET   | `/category` | Список категорій (загальних і користувацьких) |
| POST  | `/category` | Додати нову категорію витрат |
| GET   | `/record`   | Список записів витрат      |
| POST  | `/record`   | Додати запис витрат        |